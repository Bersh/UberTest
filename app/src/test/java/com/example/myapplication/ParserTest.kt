package com.example.myapplication

import com.example.myapplication.parser.SearchImagesApiJSONParser
import junit.framework.Assert.assertEquals
import junit.framework.Assert.assertNotNull
import org.json.JSONObject
import org.junit.Test

class ParserTest {

    private val sampleResponse =
        "{\"photos\":{\"page\":1,\"pages\":10,\"perpage\":50,\"total\":\"162945\",\"photo\":[{\"id\":\"48036575517\",\"owner\":\"9538836@N08\",\"secret\":\"08fcae00d5\",\"server\":\"65535\",\"farm\":66,\"title\":\"St-Peter Port, Guernesey\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48036512013\",\"owner\":\"9538836@N08\",\"secret\":\"c7f9b26c86\",\"server\":\"65535\",\"farm\":66,\"title\":\"St-Peter Port, Guernesey\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48036510868\",\"owner\":\"9538836@N08\",\"secret\":\"def2cc9529\",\"server\":\"65535\",\"farm\":66,\"title\":\"St-Peter Port, Guernesey\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48036509838\",\"owner\":\"9538836@N08\",\"secret\":\"32c37d78ab\",\"server\":\"65535\",\"farm\":66,\"title\":\"Hauteville House, St-Peter Port, Guernesey\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48036507668\",\"owner\":\"9538836@N08\",\"secret\":\"4a52442ed1\",\"server\":\"65535\",\"farm\":66,\"title\":\"Hauteville House, St-Peter Port, Guernesey\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48036505513\",\"owner\":\"9538836@N08\",\"secret\":\"7f2b7bc110\",\"server\":\"65535\",\"farm\":66,\"title\":\"Hauteville House, St-Peter Port, Guernesey\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48036567517\",\"owner\":\"9538836@N08\",\"secret\":\"b1e0bac46e\",\"server\":\"65535\",\"farm\":66,\"title\":\"Hauteville House, St-Peter Port, Guernesey\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48036459996\",\"owner\":\"9538836@N08\",\"secret\":\"b2c2588a65\",\"server\":\"65535\",\"farm\":66,\"title\":\"Hauteville House, St-Peter Port, Guernesey\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48036459291\",\"owner\":\"9538836@N08\",\"secret\":\"189d9976c3\",\"server\":\"65535\",\"farm\":66,\"title\":\"Hauteville House, St-Peter Port, Guernesey\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48035556603\",\"owner\":\"142268357@N08\",\"secret\":\"beafcb374d\",\"server\":\"65535\",\"farm\":66,\"title\":\"Kornblume\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48035591932\",\"owner\":\"73653739@N03\",\"secret\":\"c355b54830\",\"server\":\"65535\",\"farm\":66,\"title\":\"SF13 CYY\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48035483956\",\"owner\":\"73653739@N03\",\"secret\":\"8d72d50c24\",\"server\":\"65535\",\"farm\":66,\"title\":\"SF66 BCU\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48035591772\",\"owner\":\"73653739@N03\",\"secret\":\"abb113c00e\",\"server\":\"65535\",\"farm\":66,\"title\":\"Unmarked Traffic Car\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48035299338\",\"owner\":\"169703514@N07\",\"secret\":\"88659f689e\",\"server\":\"65535\",\"farm\":66,\"title\":\"Be A Dadicorn Unicorn Dad Fathers Day\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48035355777\",\"owner\":\"169703514@N07\",\"secret\":\"76a1342ea9\",\"server\":\"65535\",\"farm\":66,\"title\":\"I'm A Dad Pa And A Veteran Father's Day\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48035059412\",\"owner\":\"181737389@N02\",\"secret\":\"3ee451a1f1\",\"server\":\"65535\",\"farm\":66,\"title\":\"Pretty Motorcycles Harley Davidson American Classics shirt\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48034635456\",\"owner\":\"181737389@N02\",\"secret\":\"33318a613d\",\"server\":\"65535\",\"farm\":66,\"title\":\"Nice Jack Skellington 4th July independence day American flag shirt\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48034540953\",\"owner\":\"181908403@N05\",\"secret\":\"6b13751fa8\",\"server\":\"65535\",\"farm\":66,\"title\":\"Hunting Make Me Happy You Not So Much shirt\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48034228491\",\"owner\":\"181736389@N02\",\"secret\":\"1fc8a46ca8\",\"server\":\"65535\",\"farm\":66,\"title\":\"Premium American flag Horse shirt\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033693651\",\"owner\":\"137640587@N07\",\"secret\":\"008b779dcf\",\"server\":\"65535\",\"farm\":66,\"title\":\"ca South Para River gg.jpg\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033492363\",\"owner\":\"129023602@N05\",\"secret\":\"a886936a67\",\"server\":\"65535\",\"farm\":66,\"title\":\"andika GG[andika light projectors Tool]\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033365648\",\"owner\":\"67743149@N04\",\"secret\":\"9e11175108\",\"server\":\"65535\",\"farm\":66,\"title\":\"Tales of Arise\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033432682\",\"owner\":\"67743149@N04\",\"secret\":\"0219f86dd9\",\"server\":\"65535\",\"farm\":66,\"title\":\"Tales of Arise\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033322796\",\"owner\":\"67743149@N04\",\"secret\":\"fe4b32ae68\",\"server\":\"65535\",\"farm\":66,\"title\":\"Tales of Arise\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033295936\",\"owner\":\"67743149@N04\",\"secret\":\"60dd5641bd\",\"server\":\"65535\",\"farm\":66,\"title\":\"Dragon Ball Z: Kakarot\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033295891\",\"owner\":\"67743149@N04\",\"secret\":\"9d803b7e43\",\"server\":\"65535\",\"farm\":66,\"title\":\"Dragon Ball Z: Kakarot\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033405202\",\"owner\":\"67743149@N04\",\"secret\":\"e75affe81b\",\"server\":\"65535\",\"farm\":66,\"title\":\"Dragon Ball Z: Kakarot\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033405097\",\"owner\":\"67743149@N04\",\"secret\":\"f4ede1ea88\",\"server\":\"65535\",\"farm\":66,\"title\":\"Dragon Ball Z: Kakarot\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033404827\",\"owner\":\"67743149@N04\",\"secret\":\"2f48acb76c\",\"server\":\"65535\",\"farm\":66,\"title\":\"Dragon Ball Z: Kakarot\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033387947\",\"owner\":\"67743149@N04\",\"secret\":\"ea50171951\",\"server\":\"65535\",\"farm\":66,\"title\":\"Elden Ring\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033278091\",\"owner\":\"67743149@N04\",\"secret\":\"509f177de2\",\"server\":\"65535\",\"farm\":66,\"title\":\"Elden Ring\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033387882\",\"owner\":\"67743149@N04\",\"secret\":\"6eed91c604\",\"server\":\"65535\",\"farm\":66,\"title\":\"Elden Ring\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033387767\",\"owner\":\"67743149@N04\",\"secret\":\"1b881d6f8a\",\"server\":\"65535\",\"farm\":66,\"title\":\"Elden Ring\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033387727\",\"owner\":\"67743149@N04\",\"secret\":\"6471456e1e\",\"server\":\"65535\",\"farm\":66,\"title\":\"Elden Ring\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033320998\",\"owner\":\"67743149@N04\",\"secret\":\"8461401f42\",\"server\":\"65535\",\"farm\":66,\"title\":\"Elden Ring\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033387572\",\"owner\":\"67743149@N04\",\"secret\":\"b9b99cf77f\",\"server\":\"65535\",\"farm\":66,\"title\":\"Elden Ring\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033070377\",\"owner\":\"12639178@N07\",\"secret\":\"74435d1102\",\"server\":\"65535\",\"farm\":66,\"title\":\"Mehlschwalbe\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48033002373\",\"owner\":\"12639178@N07\",\"secret\":\"c0f946804b\",\"server\":\"65535\",\"farm\":66,\"title\":\"Mehlschwalbe\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48032246526\",\"owner\":\"142410784@N05\",\"secret\":\"6125e0ff3f\",\"server\":\"65535\",\"farm\":66,\"title\":\"CitroMobile 2019\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48032287143\",\"owner\":\"142410784@N05\",\"secret\":\"c6da575fcb\",\"server\":\"65535\",\"farm\":66,\"title\":\"CitroMobile 2019\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48032286883\",\"owner\":\"142410784@N05\",\"secret\":\"c8484d874f\",\"server\":\"65535\",\"farm\":66,\"title\":\"CitroMobile 2019\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48032353977\",\"owner\":\"142410784@N05\",\"secret\":\"e3432fd1bc\",\"server\":\"65535\",\"farm\":66,\"title\":\"CitroMobile 2019\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"13853577644\",\"owner\":\"95644297@N07\",\"secret\":\"92ed715ef3\",\"server\":\"65535\",\"farm\":66,\"title\":\"On Heat\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48032039056\",\"owner\":\"149545083@N06\",\"secret\":\"9d1a25e717\",\"server\":\"65535\",\"farm\":66,\"title\":\"Always thought the shoe dangle was sexy when GG's did it\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48031954676\",\"owner\":\"15655191@N00\",\"secret\":\"e7c0e179e9\",\"server\":\"65535\",\"farm\":66,\"title\":\"gg\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48031951661\",\"owner\":\"15655191@N00\",\"secret\":\"b39b5e3814\",\"server\":\"65535\",\"farm\":66,\"title\":\"gg 5\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48031588316\",\"owner\":\"73653739@N03\",\"secret\":\"bc4681917a\",\"server\":\"65535\",\"farm\":66,\"title\":\"SF09 KWM\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48031588131\",\"owner\":\"73653739@N03\",\"secret\":\"13054379c1\",\"server\":\"65535\",\"farm\":66,\"title\":\"SF14 NNP\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48030222881\",\"owner\":\"129023602@N05\",\"secret\":\"f2d14965d3\",\"server\":\"65535\",\"farm\":66,\"title\":\"Me\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0},{\"id\":\"48035270921\",\"owner\":\"181866366@N08\",\"secret\":\"6553370c7a\",\"server\":\"65535\",\"farm\":66,\"title\":\"Official Fireworks Bulldog 4th of July independence day American flag shirt\",\"ispublic\":1,\"isfriend\":0,\"isfamily\":0}]},\"stat\":\"ok\"}"

    @Test
    fun parsingIsCorrect() {
        val parser = SearchImagesApiJSONParser()
        val result = parser.parseSearchListResponse(JSONObject(sampleResponse))
        assertNotNull(result)
        assertEquals(10, result!!.pages)
        assertEquals(50, result.flickrPhotoList.size)
        assertEquals(48036575517, result.flickrPhotoList[0].id)
        assertEquals(
            "https://farm66.static.flickr.com/65535/48036575517_08fcae00d5.jpg",
            result.flickrPhotoList[0].imageURL
        )
    }
}